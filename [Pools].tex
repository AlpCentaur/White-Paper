% !TEX root = paper.tex
\section{Project 'Pools'}
\label{sec:pools}

\subsection{Einleitung}

\vspace{0.3cm}

Die Idee hinter den sogenannten \textit{Wunder-Pools} ist das Bündeln von Liquidität mehrerer User/Teilnehmer bzw. eine Art 'Treuehandverwahrung' in einem gemeinsamen Pool. Die Anwendungsfälle solche Pools sind sehr zahlreich. Um im Folgenden nur einige Beispiele zu nennen:  

\begin{itemize}
  \item Gemeinsame Invests in (Crypto-)Assets.
  \item Pool für ein gemeinsames (Geburtstags-)Geschenk.
  \item Kicktipp-Pool (der über die gesamte Saison verwahrt werden muss).
  \item Wetten unter Freunden.
  \item Ausgleichspool für Auslagen von Geld an Freunde (Splitwise).
\end{itemize}

\vspace{0.2cm}

Das besondere an dem in den folgenden Abschnitten genauer zu beschreibenden Modell, ist sein sehr allgemein gehaltener Ansatz, mit dem sich gleichzeitig Cases umsetzen lassen, die auf den ersten Blick sehr verschieden zu sein scheinen. Genauer genommen lassen sich solche Pools mit speziellen \textit{DAO-Strukturen} beschreiben.

Abgesehen von der den Pools zugrundeliegenden Geschäftslogik, besteht der zentrale Ansatz unserer \textit{Wunder-Pools} darin, dem User ein rundes Produkt anzubieten - und zwar ganz unabhängig dessen, welcher der oben genannten Cases nun tatsächlich umgesetzt wird. An dieser Stelle möchten wir uns daher ganz explizit von dem Status quo der heute gängigen UX in der Web3-Welt abgrenzen.

\vspace{0.2cm}

Ganz grob beschrieben, streben wir in etwa folgende Geschäftslogik an:

\begin{itemize}
  \item Ein User erstellt einen Pool (in einer dafür implementierten Wunder-Pool-Applikation).
  \item Derselbe User definiert die Pool-Art, ein etwaiges dazugehöriges Regelwerk und fordert andere User auf, dem Pool beizutreten. Idealerweise erfolgt die Einladung mittels Suche nach der Wunder-ID des einzuladenden Teilnehmers (und nicht etwa anhand seiner Ethereum-Adresse oder sonstigem).
  \item Die eingeladenen Teilnehmer erhalten die Einladung (in der WunderPass-App oder der Wunder-Pool-Applikation) und können entscheiden, ob sie dem Pool beitreten möchten oder nicht. 
  \item In der Regel ist sofort beim Beitritt des Pools der definierte Einsatz zu entrichten (der anschließend in die Pool-Treasury geht). In einigen Cases kann der Einsatz evtl. zu einem späteren Zeitpunkt erfolgen oder gar ganz entfallen (z.B. beim Case \textit{Splitwise}).
  \item Der Pool ist eingerichtet und "kommt zu Einsatz", wie in etwa
  \begin{itemize}
  	\item zum gemeinschaftlichen Investieren in (Crypto-)Assets,
  	\item zum Verwahren "in Treuhand" bei einer oder mehreren abgeschlossenen Wetten (oder auch z. B. Kicktipp)
  	\item etc.
  \end{itemize}
  \item Der Pool wird liquidiert und das Geld nach dem vorher festgelegten Regelwerk auf alle Pool-Teilnehmer (nach einem aus dem Regelwerk folgenden Verteilungsschlüssel) verteilt. Die Liquidierung selbst kann entweder ebenfalls durch das Regelwerk auf einen bestimmten Zeitpunkt und/oder Ereignis terminiert werden (z.B. Ende einer BuLi-Saison beim Case \textit{Kicktipp}) oder aber durch die Teilnehmer beschlossen werden (mittels einer DAO-Abstimmung). Die Errechnung des genannten Verteilungsschlüssels möchten wir möglichst allgemein halten und übertragen diese Verantwortlichkeit einem \textit{abstrakten Oracle}, welches es stets Case-spezifisch zu definieren (und zu implementieren) gilt.
\end{itemize}

\vspace{0.2cm}

\underline{\textbf{Product-Sicht}}

\vspace{0.2cm}

Abschließend sei noch einmal betont, dass wir das/die aus den Wunder-Pools hervorgehende(n) Product(s) (mittelfristig) alternativlos user-friendly sehen. Ohne notwendigen Bezug zur Crypto-Szene, ohne MetaMask und ohne kryptische hexadezimale Wallet-Adressen. Stattdessen clean und simpel.

\vspace{0.5cm}

\subsection{Formalisierungen}

\vspace{0.3cm}

Zunächst einmal benötigen wir einige formale Werkzeuge und bedienen uns dafür folgender Definition:

\vspace{0.2cm}

\begin{Def}\label{defPoolTeilnehmer}

Im folgenden setzen wir Voraus, die Nutzung der Pools seitens der User erfordert zwingend den Besitz eines WunderPass (bzw. Wunder-ID) und betrachten von daher auch nur solche User.

\begin{equation*}
  U := \left\{ u_1; u_2;...; u_{n} \text{ } | \text{ } u_i \text{ besitzt eine Wunder-ID} \right\}
\end{equation*}

\vspace{0.2cm}

Wir stellen zusätzlich, dass der vorausgesetzte Besitz einer Wunder-ID mit dem Besitz von unterschiedlichen Wallets bzw. anderen durch die Wunder-ID implizierten Dingen einhergeht. So hat jeder User $u_i$ z.B. eine Telefonnummer mit seiner Wunder-ID verknüpft (anhand derer er mittels Kontakte-Scan auf dem Smartphone als Inhaber einer Wunder-ID und damit potenzieller Pool-Teilnehmer erkannt werden kann und soll). Des weiteren kann $u_i$ einen NFT-Pass (siehe Kapitel \ref{sec:nft-pass}) besitzen und/oder unser ERC20-Utility-Token (im Folgenden als \textit{WPT} bezeichnet; siehe Kapitel \todo{TODO: verlinken}). 

\vspace{0.2cm}

Wir formalisieren den in Kapitel \ref{sec:nft-pass} definierten NFT-Pass als die (geordnete) Menge aller bisher geminteter NFT-Pässe:

\begin{align*}
  WPN &:= \left\{ wpn_1; wpn_2;... \right\} \text{ mit} \\
  wpn_i &:= (s_i, w_i, m_i)
\end{align*}

\vspace{0.2cm}

Dabei repräsentiert $s_i$ den Status des NFT-Passes, $m_i$ sein Muster und $w_i$ das sich auf ihm abgebildete Weltwunder.

\vspace{0.2cm}

Den Besitz eines Pass-NFTs beschreiben wir durch die Funktion 

\vspace{0.2cm}

\begin{equation*}
  \omega : U \rightarrow \mathcal{P} \left( WPN \right)  
\end{equation*}

\begin{equation*}
  \omega(u):= \left\{ wpn \in WPN \text{ } | \text{ User u besitzt den Pass-NFT } wpn \right\}. 
\end{equation*}

\vspace{0.2cm}

Analog dazu definieren wir auch den Besitz am \textit{WPT} eines Users - mit dem Unterschied, dass der Funktionsbereich dieser Funktion aufgrund der Fungibilität von einer Potenzmenge auf einen simplen numerischen Wert zusammenfällt:

\vspace{0.2cm}

\begin{equation*}
  \varphi : U \rightarrow \mathbb{Q}  
\end{equation*}

\begin{equation*}
  \varphi(u):= \text{ Balance des Users u am ERC20-Token WPT}. 
\end{equation*}

\end{Def}

\vspace{0.5cm}

\subsection{Pool-Erzeugung}

\vspace{0.3cm}

Die Erzeugung des Pools findet in zwei Phasen statt: Der \textit{Initialisierungs-Phase} und der \textit{Teilnahme-Phase}

\vspace{0.2cm}

\underline{\textbf{Initialisierungs-Phase}}

\vspace{0.2cm}

Die Initialisierungs-Phase läuft in etwa in folgenden Schritten ab:

\begin{itemize}
	\item Ein Initiator (Admin) $u_A \in U$ erzeugt den Pool in einer dafür vorgesehenen \textit{Pool-Applikation} (vergleichbar mit der Erstellung einer WhatsApp-Gruppe). Der Initiator $u_A$ ist dabei selbst ein Teilnehmer des Pools. Unsere klare Absicht hierbei ist jedoch keine "gesonderten" Pool-Teilnehmer zu haben bzw. mit besonderen Rechten auszustatten. Die Unterscheidung zwischen dem Admin $u_A$ und anderen Pool-Teilnehmern $u \in U$ ist idealerweise - sofern es denn der spezielle Case zulässt - nur für die Initialisierungs-Phase von Nöten und kann anschließend entfallen.
	\item Der Admin definiert das Regelwerk für den zu erstellenden Pool:
	\begin{itemize}
		\item Art des Pools (Invest-Pool, Wette, Spende, Kicktipp, Splitwise etc.)
		\item privater oder öffentlich zugänglicher Pool
		\item etwaige Obergrenze an Teilnehmern
		\item Einsatz (minimaler, maximaler oder exakter Einsatz pro Teilnehmer und Währung des Einsatzes)
		\item Auszahlungslogik (per Abstimmung oder Adresse eines Oracle-Smart-Contracts, der abhängig seiner Contract-Logik einen Auszahlungsschlüssel bereitstellt)
	\end{itemize}
\end{itemize}

\vspace{0.3cm}

\underline{\textbf{Teilnahme-Phase}}

\vspace{0.2cm}

Die Teilnahme-Phase besteht grob aus folgenden Schritten:

\begin{itemize}
	\item Der Admin verliert seine Sonderstellung und wird stattdessen zum ersten Teilnehmer seines eigens initiierten Pools. 
	\item Der (ursprüngliche) Admin lädt Teilnehmer ein, sich am Pool zu beteiligen. Die Beteiligung erfordert dabei einen WunderPass (= Wunder-ID) seitens des Teilnehmers. Idealerweise sind die Wunder-IDs mit Telefonnummern verknüpft, sodass sich die einzuladenden User in den Kontakten des Admins erkennbar als potenzielle Teilnehmer wiederfinden.
	\item Alternativ kann der (ursprüngliche) Admin (oder auch jeder andere bereits beigetreten Teilnehmer) einen Teilnahme-Link an (weitere) potenzielle Teilnehmer verschicken.
	\item Jeder adressierte User erhält die Einladung mit allen relevanten Informationen zum eingeladenen Pool (insbesondere auch dem zu entwendenden Einsatz) in seiner Wunder-Pool-Applikation, und muss diese lediglich entweder bestätigen oder ablehnen (Pull-Prinzip). Insbesondere braucht der User für den Beitritt zum Pool kein MetaMask oder Sonstiges (Push-Prinzip wie aktuell bei DAOs üblich). 
	\item Auch der Einsatz des neuen Teilnehmers muss nicht aktiv entrichtet (an eine Wallet) werden, sondern wird stattdessen im Zuge des vorigen Schritts nach Bestätigung der Teilnahme am Pool automatisch eingezogen.
\end{itemize}

\vspace{0.2cm}

Wir fassen die bisher erzielten Ergebnisse etwas formaler zusammen:

\vspace{0.2cm}

\begin{Def}\label{defPool}

Ein (jungfräulicher) Pool im Sinne der oben Aufgezählten Eigenschaften und Anforderungen lässt sich formal schreiben als

\begin{equation*}
  Pool := \left( \mathcal{U}, \mathcal{R}, \mathcal{T}, \mathcal{G} \right) \text{ mit}
\end{equation*}

\begin{align*}
  & \mathcal{U} = \left\{ u_1; u_2;...;u_n \right\} \subseteq U \text{ die Menge der n Pool-Teilnehmer, } \\
  & \mathcal{R} \text{ das Regelset des Pools, was es gesondert zu formalisieren gilt, } \\
  & \mathcal{T} = \left\{ s_1...;s_n \right\} \text{ mit } s_i \in \mathbb{Q} \text{ die Treasury des Pools und} \\
  & \mathcal{G} = \left\{ g_1...;g_n \right\} \text{ mit } g_i \in \mathbb{N} \text{ die Governance des Pools.}
\end{align*}

\vspace{0.2cm}

Dabei beschreibt jedes $s_i$ den Einsatz des Teilnehmers $u_i \in \mathcal{U}$ ($s$ für Stake). Dieser Einsatz liegt dabei in einem vom Regelset $\mathcal{R}$ definierten Intervall $\mathcal{I} \subseteq \mathbb{Q}$. Damit haben wir bereits an dieser Stelle einen kleinen Teil der noch fehlenden Formalisierung von $\mathcal{R}$ identifiziert. Bei genauer Betrachtung fehlt uns noch die Einheit der Einsätze $s_i$. Diese wird sehr wahrscheinlich \textit{USDT} sein oder ein anderer Stable-Coin.

Zudem beachte man an dieser Stelle zusätzlich, die Definition von $\mathcal{T}$ werde im Verlaufe der Lifetime eines Pools nicht so simpel bleiben können, als nur aus dem eingebrachten Einsätzen der Teilnehmer zu bestehen. Die Pool-Treasury bedeutet nämlich mehr als nur die Menge der initialen Stakes. Etwaige Invests aus der Treasury heraus würden nämlich ebenfalls in der Treasury landen.

\vspace{0.2cm} 

Die $g_i$ dagegen beschreiben ganz simpel die Anzahl der Governance-Tokens pro User $u_i \in \mathcal{U}$. Man kann diese auch als Gesellschaftsanteile einer GbR betrachten. Das Stammkapital dieser Gesellschaft würde sich in diesem Vergleich auf

\begin{equation*}
  \kappa := \sum_{i=1}^{n} g_i 
\end{equation*}

belaufen. Der prozentuale Stimmrecht-Anteil eines Users $u_i \in \mathcal{U}$ ergäbe sich damit als 

\begin{equation*}
  \rho_i = \frac{g_i}{\kappa}, \text{   } \forall i = 1, 2, ...,n. 
\end{equation*}

\end{Def}

\vspace{0.3cm}

Die zusammengetragenen Anforderungen für die Initialisierung eines WunderPools lassen sofort deutlich erkennen, \textbf{diese Pools könnten mittels DAO-ähnlicher Strukturen implementiert werden}. Dies erscheint insofern noch logischer, nachdem wir erkannt haben, die Pools stellen gesellschaftsrechtlich GbRs dar - also Gesellschaften und/oder Organisationen.  

\vspace{0.5cm}

\subsection{Pool-Economics}

\vspace{0.3cm}

\todo{Staking von WUNDER}

\todo{Pool-Governance-Tokens}

\todo{Pass-NFT-Status-Rewards}

\todo{Pass-NFT-Wunder-Rewards}

\vspace{0.5cm}

\subsection{Pool-Lifetime}

\vspace{0.3cm}

\todo{zeitlich begrenzte Pools}

\todo{zeitlich unbegrenzte Pools}

\todo{Beispiele}

\vspace{0.5cm}

\subsection{Pool-Liquidierung}

\vspace{0.3cm}

\todo{Oracle entscheidet Auszahlungsschlüssel}

\vspace{0.5cm}
